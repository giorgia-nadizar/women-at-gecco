<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <title>Women+@Gecco 2023</title>

  </head>
  <body>
    <div class="p-3">
      <h1>Question 1</h1>
      <div>
        <h2 id="question_text">Whatâ€™s your skin colour?</h2>
        <p id="question_info">African Americans and Latinos make up 30% of the U.S. population but account for less than 10% of participants in genetic studies.</p>
        <div id="questions">
          <button type="button" class="btn btn-outline-dark btn-lg btn-block" id="q1-1">Black</button>
          <button type="button" class="btn btn-outline-dark btn-lg btn-block" id="q1-2">Various shades</button>
          <button type="button" class="btn btn-outline-dark btn-lg btn-block" id="q1-3">White</button>
        </div>
      </div>

      <div class="text-center pt-5 pb-2">
        <div class="btn-group d-flex" role="group" aria-label="Arrows">
          <a href="index.html" role="button" id="previous" aria-pressed="true" class="btn btn-outline-danger">Previous question</button>
          <a href="recap.html" role="button" id="next" aria-pressed="true" aria-disabled="true" class="btn btn-outline-success disabled">Next question</a>
        </div>
      </div>

      <div class="progress">
        <div class="progress-bar" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script>
      const questions = [
          {
              "q_id": "q1",
              "text": "What's up?",
              "answers": [
                  {
                      "value": 1,
                      "text": "Hello1"
                  },
                  {
                      "value": 2,
                      "text": "Hello2"
                  },
                  {
                      "value": 3,
                      "text": "Hello3"
                  }
              ]
          },
          {
              "q_id": "q2",
              "text": "What's up 2?",
              "answers": [
                  {
                      "value": 1,
                      "text": "Ho1"
                  },
                  {
                      "value": 2,
                      "text": "Hu2"
                  },
                  {
                      "value": 3,
                      "text": "Hello3"
                  }
              ]
          }
      ];
      
      function updatePage(){
        let current_q_id = sessionStorage.getItem("current_q_id");
        let current_question = questions[parseInt(current_q_id.replace("q","")) - 1];
        let current_text = current_question.text;
        $("#question_text").text(current_text);
        // clear responses
        $("#questions").empty();
        let current_answers = current_question.answers;
        for (answer in current_answers){
          // create button
          let curr_btn = document.createElement("button");
          curr_btn.innerHTML = answer.text
          curr_btn.id = current_q_id + "-" + answer.value
          curr_btn.className = "btn btn-outline-dark btn-lg btn-block"
          // append it
          $("#questions").append(curr_btn);
        }
      };
      

      $(".btn-outline-dark").on("click", function(){
        let splitted = $(this).attr('id').split("-");
        let key = splitted[0];
        let value = parseInt(splitted[1], 10);
        sessionStorage.setItem(key, value);
        $("#next").removeClass("disabled");
      });
    </script>
  </body>
</html>
